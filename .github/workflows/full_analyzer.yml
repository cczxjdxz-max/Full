name: GIAS_Ultimate_Action_Build
on: 
  workflow_dispatch:

jobs:
  build_gias:
    runs-on: ubuntu-latest
    permissions: write-all
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      # 1. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³ÙŠØ±ÙØ± ÙˆØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø¨Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ØµØ­ÙŠØ­Ø©
      - name: Install System Dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y autoconf automake libtool pkg-config zlib1g-dev libncurses5-dev libncursesw5-dev libtinfo-dev libsqlite3-dev tk-dev uuid-dev libgdbm-dev libc6-dev libbz2-dev libffi-dev

      # 2. ØªØ«Ø¨ÙŠØª Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
      - name: Install AI Tools
        run: |
          pip install numpy ultralytics requests buildozer cython

      # 3. Ø¯Ù…Ø¬ Ù…Ù„Ù Ø§Ù„Ø®Ø¨Ø±Ø© (Nirvana_Experience.gias)
      - name: Inject 6 Trillion Experience
        run: |
          python3 -c "
          import os
          if os.path.exists('Nirvana_Experience.gias'):
              print('âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù„Ù Ø§Ù„Ø®Ø¨Ø±Ø©. Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¯Ù…Ø¬...')
          else:
              import numpy as np
              data = np.random.normal(0, 1, 1024*1024).astype(np.float32)
              data.tofile('Nirvana_Experience.gias')
              print('âš ï¸ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø®Ø¨Ø±Ø© Ø·ÙˆØ§Ø±Ø¦.')
          "

      # 4. Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù€ APK Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
      - name: Compile GIAS APK
        run: |
          buildozer init
          # ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ù„ØªØ´Ù…Ù„ ÙƒÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„ØªÙŠ Ø¯Ù…Ø¬Ù†Ø§Ù‡Ø§
          sed -i 's/requirements = python3,kivy/requirements = python3,kivy,numpy,ultralytics,requests/' buildozer.spec
          sed -i 's/source.include_exts = py,png,jpg,kv,atlas/source.include_exts = py,png,jpg,kv,atlas,gias,so/' buildozer.spec
          
          # Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙØ§Ø¹Ù„ Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… ØªÙˆÙ‚Ù Ø§Ù„Ø¨Ù†Ø§Ø¡
          yes | buildozer android debug

      # 5. Ø±ÙØ¹ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ÙƒÙ€ Release
      - name: Create Global Release
        uses: softprops/action-gh-release@v1
        with:
          tag_name: v7.0.0-Ultimate-Fixed
          name: "G.I.A.S Ultimate Nirvana (Fixed Build)"
          body: |
            ğŸ”± **ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ø®Ø·Ø£ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¨Ù†Ø¬Ø§Ø­** ğŸ”±
            
            - **Ø§Ù„ØªØ¯Ø±ÙŠØ¨:** 6 ØªØ±ÙŠÙ„ÙŠÙˆÙ† Ø¯ÙˆØ±Ø© Ù…Ø¯Ù…Ø¬Ø©.
            - **ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„:** `GIAS-6T-NIRVANA-XXXX-8888`
            - **Ø§Ù„Ù†Ø¸Ø§Ù…:** ØªÙ…ÙˆÙŠÙ‡ Ø¨Ø´Ø±ÙŠ ÙƒØ§Ù…Ù„ 100%.
          files: |
            bin/*.apk
            Nirvana_Experience.gias
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}