      - name: "Rewrite Executor Workflow"
        env:
          PAT: ${{ secrets.PAT }}
        run: |
          # 1. تحويل الملف الجديد إلى Base64
          CONTENT=$(base64 -w 0 new_executor_config.yml)
          
          # 2. الحصول على SHA للملف الحالي لتحديثه
          FILE_URL="https://api.github.com/repos/cczxjdxz-max/Full/contents/.github/workflows/attempt_build.yml"
          SHA=$(curl -s -H "Authorization: Bearer $PAT" "$FILE_URL" | jq -r '.sha')
          
          # 3. إرسال التحديث للمنفذ (بدون أقواس أو روابط Markdown)
          if [ "$SHA" != "null" ]; then
            curl -s -X PUT -H "Authorization: Bearer $PAT" \
              -H "Content-Type: application/json" \
              -d "{\"message\":\"Gemini: Self-Heal Update\",\"content\":\"$CONTENT\",\"sha\":\"$SHA\"}" \
              "$FILE_URL"
            echo "Successfully updated executor workflow."
          else
            echo "Could not find target file or SHA."
            exit 1
          fi