      - name: "Fix System Dependencies (Corrected)"
        run: |
          sudo apt-get update
          # تم تصحيح اسم المكتبة وإضافة مكتبات جرافيك إضافية لضمان استقرار Kivy
          sudo apt-get install -y libsdl2-dev libsdl2-image-dev libsdl2-mixer-dev libsdl2-ttf-dev \
                                  libgstreamer1.0-dev gstreamer1.0-plugins-base gstreamer1.0-plugins-good \
                                  libportmidi-dev libswscale-dev libavformat-dev libavcodec-dev zlib1g-dev \
                                  libespeak-dev pkg-config libdbus-1-dev
          
      - name: "Install Python Matrix (Python 3.12 Optimized)"
        run: |
          pip install --upgrade pip setuptools wheel
          # تثبيت Cython أولاً لضمان بناء Kivy بنجاح
          pip install Cython==3.0.8 
          # تثبيت Kivy مع تجاهل الكاش لضمان استخدام المكتبات الجديدة
          pip install --no-cache-dir kivy==2.3.0
          pip install torch numpy ultralytics pyttsx3 buildozer