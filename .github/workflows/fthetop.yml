name: GIAS-CATALOG-HEIST
on:
  workflow_dispatch:

jobs:
  find_catalog:
    runs-on: ubuntu-latest
    steps:
      - name: 1. Unpack Everything
        run: |
          wget -q -O game.apk "https://dl.cdn.freefiremobile.com/live/package/FreeFire.apk"
          unzip -o game.apk -d game_files

      - name: 2. Search for Mapping File
        run: |
          cat << 'EOF' > catalog_finder.py
          import os
          import json

          # Ù†Ø¨Ø­Ø« Ø¹Ù† Ø£ÙŠ Ù…Ù„Ù ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Hash Ù…Ù† Ø§Ù„Ù€ 30 Ø£Ù„Ù Ù…Ù„Ù
          example_hash = "bb243b" # Ø¨Ø¯Ø§ÙŠØ© Ø£Ø­Ø¯ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ØªÙŠ Ø°ÙƒØ±ØªÙ‡Ø§
          found = False

          print(f"ğŸ” Scanning for catalog containing hash: {example_hash}...")

          for root, dirs, files in os.walk("game_files"):
              for file in files:
                  # Ù†ØªØ®Ø·Ù‰ Ù…Ø¬Ù„Ø¯ bin Ù†ÙØ³Ù‡ Ù„Ø£Ù†Ù†Ø§ Ù†Ø¨Ø­Ø« Ø¹Ù† "Ø§Ù„ÙÙ‡Ø±Ø³" Ø®Ø§Ø±Ø¬Ù‡
                  if "assets/bin" in root: continue
                  
                  f_path = os.path.join(root, file)
                  try:
                      with open(f_path, 'r', errors='ignore') as f:
                          content = f.read(100000) # Ù‚Ø±Ø§Ø¡Ø© Ø£ÙˆÙ„ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ù…Ù„Ù
                          if example_hash in content:
                              print(f"ğŸ¯ FOUND IT! Catalog Candidate: {f_path}")
                              found = True
                  except: pass
          
          if not found:
              print("âŒ No direct catalog found in APK. It might be inside a .bundle file.")
          EOF
          python3 catalog_finder.py