name: GIAS-HEX-SIGNATURE-ANALYSIS
on:
  workflow_dispatch:

jobs:
  analyze:
    runs-on: ubuntu-latest
    steps:
      - name: 1. Setup Environment
        run: pip install UnityPy

      - name: 2. APK Extraction
        run: |
          wget -q -O game.apk "https://dl.cdn.freefiremobile.com/live/package/FreeFire.apk"
          unzip -o game.apk -d game_files

      - name: 3. Hex & Data Inspector
        run: |
          cat << 'EOF' > inspector.py
          import os

          target_dir = "game_files/assets/bin"
          # Ø¬Ù„Ø¨ ÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØªØ±ØªÙŠØ¨Ù‡Ø§ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø¬Ù… (Ø§Ù„Ø£ÙƒØ¨Ø± Ø£ÙˆÙ„Ø§Ù‹)
          files = []
          for root, dirs, filenames in os.walk(target_dir):
              for f in filenames:
                  files.append(os.path.join(root, f))
          
          files.sort(key=os.path.getsize, reverse=True)

          print(f"ğŸ”¬ Analyzing the Top 5 Giants out of {len(files)} files...")

          for f_path in files[:5]:
              size = os.path.getsize(f_path)
              with open(f_path, 'rb') as f:
                  header = f.read(32) # Ù‚Ø±Ø§Ø¡Ø© Ø£ÙˆÙ„ 32 Ø¨Ø§ÙŠØª (Ø§Ù„Ø¨ØµÙ…Ø©)
                  print(f"\nğŸ“„ File: {os.path.basename(f_path)}")
                  print(f"   Size: {size} bytes")
                  print(f"   Hex Signature: {header.hex(' ')}")
                  # Ù…Ø­Ø§ÙˆÙ„Ø© Ù‚Ø±Ø§Ø¡Ø© Ø£ÙŠ Ù†Øµ ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø±
                  try:
                      print(f"   ASCII: {header.decode('ascii', errors='ignore')}")
                  except: pass
          EOF
          python3 inspector.py