# .github/workflows/geass-nuclear-fusion.yml
name: GEASS-NUCLEAR-FUSION-INJECTOR

on:
  workflow_dispatch:

jobs:
  fusion_process:
    runs-on: ubuntu-latest
    steps:
      - name: 1. Deep_Environment_Setup
        run: |
          sudo apt-get update
          sudo apt-get install -y openjdk-17-jdk apksigner wget python3-pip zip unzip
          curl -L "https://bitbucket.org/iBotPeaches/apktool/downloads/apktool_2.9.3.jar" -o apktool.jar
          mkdir -p ./GEASS/final_bundle/scripts

      - name: 2. Capture_Target_and_Disassemble
        run: |
          echo "ğŸ“¥ Downloading 495MB Target..."
          wget -q -O Target.apk "https://dl.cdn.freefiremobile.com/live/package/FreeFire.apk"
          
          echo "ğŸ—ï¸ Decompiling (The Real Deal)..."
          # ÙÙƒ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©
          java -jar apktool.jar d Target.apk -o decoded_source

      - name: 3. Surgical_Injection (Inside the APK)
        run: |
          echo "ğŸ§¬ Injecting Sovereign API into APK Internal Assets..."
          # Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø¯Ø§Ø®Ù„ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…ÙÙƒÙƒ
          mkdir -p decoded_source/assets/python/core/
          
          # ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ø­Ø±Ùƒ ÙÙŠ Ù‚Ù„Ø¨ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ù„Ø¹Ø¨Ø©
          cat << 'EOF' > decoded_source/assets/python/core/sovereign.py
          class GameAPI:
              def __init__(self):
                  self.status = "Active"
              def spawn_bots(self, count):
                  print(f"ğŸ”¥ GEASS INTERNAL: Spawning {count} Bots.")
          EOF
          
          # ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¯Ø§Ø®Ù„ Ù…Ù„Ù Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
          sed -i 's/>Free Fire</>GEASS SOVEREIGN</g' decoded_source/res/values/strings.xml
          echo "âœ… Identity Altered."

      - name: 4. Re-Assemble_the_Monster
        run: |
          echo "ğŸ—ï¸ Rebuilding (Compressing 500MB back)..."
          # Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ© Ù‡ÙŠ Ø§Ù„ØªÙŠ ØªØ­Ù‚Ù† Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ ÙØ¹Ù„ÙŠØ§Ù‹ ÙÙŠ Ù…Ù„Ù dex ÙˆØ§Ø­Ø¯
          java -jar apktool.jar b decoded_source -o ./GEASS/final_bundle/Geass_Sovereign_Real.apk

      - name: 5. Sovereign_Signing
        run: |
          echo "âœï¸ Signing with RSA 2048-bit Key..."
          keytool -genkey -v -keystore geass.jks -alias geass -keyalg RSA -keysize 2048 -validity 10000 -storepass 123456 -keypass 123456 -dname "CN=GEASS"
          
          # ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø°ÙŠ Ù†ØªØ¬ Ø¹Ù† Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„ÙØ¹Ù„ÙŠØ©
          apksigner sign --ks geass.jks --ks-pass pass:123456 \
            --out ./GEASS/final_bundle/Geass_Sovereign_Signed.apk \
            ./GEASS/final_bundle/Geass_Sovereign_Real.apk

      - name: 6. Extraction_of_Evidence
        run: |
          # Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ù„Ù Ø¨Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€ APK ÙØ¹Ù„Ø§Ù‹ Ø¹Ø¨Ø± ÙØ­Øµ Ù…Ø­ØªÙˆÙŠØ§Øª Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù†Ø§ØªØ¬
          echo "ğŸ” Verification: Checking if sovereign.py is inside the NEW APK..."
          unzip -l ./GEASS/final_bundle/Geass_Sovereign_Signed.apk | grep "sovereign.py" > verification.txt
          cp verification.txt ./GEASS/final_bundle/

      - name: 7. Final_Export
        uses: actions/upload-artifact@v4
        with:
          name: GEASS_REAL_INJECTED_APK
          path: ./GEASS/final_bundle/