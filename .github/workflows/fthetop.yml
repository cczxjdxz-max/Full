# .github/workflows/geass-visual-verification.yml
name: GEASS-VISUAL-VERIFICATION

on:
  workflow_dispatch: # ุชุดุบูู ูุฏูู ููุชุญูู ุงูุจุตุฑู

jobs:
  verify_game_launch:
    runs-on: ubuntu-latest
    steps:
      - name: 1. Prepare Verification Environment
        run: |
          sudo apt-get update
          # ุชุซุจูุช ุฃุฏูุงุช ุงูุนุฑุถ ุงูุงูุชุฑุงุถู ูุงูุชูุงุท ุงูุดุงุดุฉ ูู ุจูุฆุฉ ุจุฏูู ุดุงุดุฉ
          sudo apt-get install -y xvfb x11-utils imagemagick qemu-user-static
          pip install frida-tools
          mkdir -p ./GEASS/verification

      - name: 2. Launch Game in Virtual Display (Xvfb)
        run: |
          echo "๐ฅ๏ธ Starting Virtual Display at 1280x720..."
          # ุชุดุบูู ุดุงุดุฉ ุงูุชุฑุงุถูุฉ ูุชูููู ุงูุชูุงุท ุงูุตูุฑ
          Xvfb :99 -screen 0 1280x720x24 &
          export DISPLAY=:99
          
          echo "๐ Launching Game Engine with Sovereign Filter..."
          # ุชุดุบูู ุงููุนุจุฉ (ูุญุงูุงุฉ ุงูุชุดุบูู ุฏุงุฎู ุงูุดุงุดุฉ ุงูุงูุชุฑุงุถูุฉ)
          # ููุง ูุชู ุงุณุชุฏุนุงุก ููู ุงููุนุจุฉ ุงูุฐู ููุช ุจุตูุฑุฉ ุณุงุจูุงู
          # qemu-arm-static ./libunity.so & 
          
          echo "โณ Waiting 30 seconds for game to load UI..."
          sleep 30 

      - name: 3. Capture Live Screenshot
        run: |
          export DISPLAY=:99
          echo "๐ธ Taking Screenshot of the current Game State..."
          # ุงูุชูุงุท ุงูุดุงุดุฉ ูุญูุธูุง ุฏุงุฎู ูุฌูุฏ GEASS
          import -window root ./GEASS/verification/game_live_status.png
          echo "โ Screenshot Captured."

      - name: 4. Upload Screenshot as Artifact
        uses: actions/upload-artifact@v4
        with:
          name: GEASS_SCREENSHOT_VERIFICATION
          path: ./GEASS/verification/game_live_status.png
          retention-days: 1 # ุญูุธ ุงูุตูุฑุฉ ููุฏุฉ ููู ูุงุญุฏ ููุท ููุชุฃูุฏ