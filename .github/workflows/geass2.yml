name: GIAS-INDEX-HUNTER
on:
  workflow_dispatch:

jobs:
  find_index:
    runs-on: ubuntu-latest
    steps:
      - name: 1. Setup
        run: pip install UnityPy

      - name: 2. Extraction
        run: |
          wget -q -O game.apk "https://dl.cdn.freefiremobile.com/live/package/FreeFire.apk"
          unzip -o game.apk -d game_files

      - name: 3. Search for Catalog/Index
        run: |
          cat << 'EOF' > find_index.py
          import os
          import json

          # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£ÙŠ Ù…Ù„Ù ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙƒÙ„Ù…Ø© catalog Ø£Ùˆ settings Ø£Ùˆ map_info
          index_candidates = []
          for root, dirs, files in os.walk("game_files"):
              for file in files:
                  f_lower = file.lower()
                  if any(x in f_lower for x in ["catalog", "settings", "index", "config", "addressables"]):
                      index_candidates.append(os.path.join(root, file))

          print(f"ğŸ” Found {len(index_candidates)} potential index files.")
          
          # Ø¹Ø±Ø¶ Ø£Ø­Ø¬Ø§Ù…Ù‡Ù… ÙˆÙ…Ø³Ø§Ø±Ø§ØªÙ‡Ù… Ù„Ù†Ø¹Ø±Ù Ø£ÙŠÙ‡Ù… "Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ"
          for path in index_candidates:
              print(f"ğŸ“„ File: {path} | Size: {os.path.getsize(path)} bytes")
          EOF
          python3 find_index.py